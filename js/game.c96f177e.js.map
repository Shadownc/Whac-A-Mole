{"version":3,"file":"js/game.c96f177e.js","mappings":"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","sources":["webpack://dds/./src/views/goBang.vue","webpack://dds/./src/views/goBang.vue?d587"],"sourcesContent":["<template>\r\n  <div class=\"wrap\">\r\n    <canvas id=\"canvas\" width=\"600\" height=\"600\"></canvas>\r\n    <button @click=\"setFirst\">随机先手</button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from \"vue\";\r\nconst rand = (min, max) => {\r\n  return Math.round(Math.random() * (max - min) + min);\r\n};\r\nconst first = ref(null);\r\nconst cheeks = ref([]);\r\n\r\nconst setFirst = () => {\r\n  first.value = rand(0, 1) == 0 ? \"white\" : \"black\";\r\n};\r\nconst init = () => {\r\n  const canvas = document.getElementById(\"canvas\");\r\n  const ctx = canvas.getContext(\"2d\");\r\n  // 水平，总共15条线\r\n  for (let i = 0; i < 15; i++) {\r\n    ctx.beginPath();\r\n    ctx.moveTo(20, 20 + i * 40);\r\n    ctx.lineTo(580, 20 + i * 40);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n  }\r\n\r\n  // 垂直，总共15条线\r\n  for (let i = 0; i < 15; i++) {\r\n    ctx.beginPath();\r\n    ctx.moveTo(20 + i * 40, 20);\r\n    ctx.lineTo(20 + i * 40, 580);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n  }\r\n  for (let i = 0; i < 15; i++) {\r\n    cheeks.value[i] = new Array(15).fill(0);\r\n  }\r\n  //点击\r\n  canvas.onclick = function (e) {\r\n    //修改样式居中后不能使用 clientX,clientY\r\n    const clientX = e.offsetX;\r\n    const clientY = e.offsetY;\r\n    console.log(clientX, clientY);\r\n    // 对40进行取整，确保棋子落在交叉处\r\n    const x = Math.round((clientX - 20) / 40) * 40 + 20;\r\n    const y = Math.round((clientY - 20) / 40) * 40 + 20;\r\n    // cheeks二维数组的索引\r\n    // 这么写有点冗余，这么写你们好理解一点\r\n    const cheeksX = (x - 20) / 40;\r\n    const cheeksY = (y - 20) / 40;\r\n    // 对应元素不为0说明此地方已有棋，返回\r\n    if (cheeks.value[cheeksY][cheeksX]) return;\r\n    // 黑棋为1，白棋为2\r\n    cheeks.value[cheeksY][cheeksX] = first.value == \"black\" ? 1 : 2;\r\n    ctx.beginPath();\r\n    // 画圆\r\n    ctx.arc(x, y, 20, 0, 2 * Math.PI);\r\n    // 判断走黑还是白\r\n    ctx.fillStyle = first.value == \"black\" ? \"black\" : \"white\";\r\n    ctx.fill();\r\n    ctx.closePath();\r\n    setTimeout(() => {\r\n      if (isWin(cheeksX, cheeksY)) {\r\n        const con = confirm(\r\n          `${first.value == \"black\" ? \"黑棋\" : \"白棋\"}赢了！是否重新开局？`\r\n        );\r\n        // 重新开局\r\n        ctx.clearRect(0, 0, 600, 600);\r\n        first.value = rand(0, 1) == 0 ? \"white\" : \"black\";\r\n\r\n        con && init();\r\n      }\r\n      // 切换黑白\r\n      first.value = first.value == \"black\" ? \"white\" : \"black\";\r\n    }, 0);\r\n  };\r\n};\r\nconst isWin = (x, y) => {\r\n  const flag = first.value == \"black\" ? 1 : 2;\r\n  // 上和下\r\n  if (up_down(x, y, flag)) {\r\n    return true;\r\n  }\r\n\r\n  // 左和右\r\n  if (left_right(x, y, flag)) {\r\n    return true;\r\n  }\r\n  // 左上和右下\r\n  if (lu_rd(x, y, flag)) {\r\n    return true;\r\n  }\r\n\r\n  // 右上和左下\r\n  if (ru_ld(x, y, flag)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\nconst up_down = (x, y, flag) => {\r\n  let num = 1;\r\n  // 向上找\r\n  for (let i = 1; i < 5; i++) {\r\n    let tempY = y - i;\r\n    console.log(x, tempY);\r\n    if (tempY < 0 || cheeks.value[tempY][x] !== flag) break;\r\n    if (cheeks.value[tempY][x] === flag) num += 1;\r\n  }\r\n  // 向下找\r\n  for (let i = 1; i < 5; i++) {\r\n    let tempY = y + i;\r\n    console.log(x, tempY);\r\n    if (tempY > 14 || cheeks.value[tempY][x] !== flag) break;\r\n    if (cheeks.value[tempY][x] === flag) num += 1;\r\n  }\r\n  return num >= 5;\r\n};\r\nconst left_right = (x, y, flag) => {\r\n  let num = 1;\r\n  // 向左找\r\n  for (let i = 1; i < 5; i++) {\r\n    let tempX = x - i;\r\n    if (tempX < 0 || cheeks.value[y][tempX] !== flag) break;\r\n    if (cheeks.value[y][tempX] === flag) num += 1;\r\n  }\r\n  // 向右找\r\n  for (let i = 1; i < 5; i++) {\r\n    let tempX = x + i;\r\n    if (tempX > 14 || cheeks.value[y][tempX] !== flag) break;\r\n    if (cheeks.value[y][tempX] === flag) num += 1;\r\n  }\r\n  return num >= 5;\r\n};\r\nconst lu_rd = (x, y, flag) => {\r\n  let num = 1;\r\n  // 向左上找\r\n  for (let i = 1; i < 5; i++) {\r\n    let tempX = x - i;\r\n    let tempY = y - i;\r\n    if (tempX < 0 || tempY < 0 || cheeks.value[tempY][tempX] !== flag) break;\r\n    if (cheeks.value[tempY][tempX] === flag) num += 1;\r\n  }\r\n  // 向右下找\r\n  for (let i = 1; i < 5; i++) {\r\n    let tempX = x + i;\r\n    let tempY = y + i;\r\n    if (tempX > 14 || tempY > 14 || cheeks.value[tempY][tempX] !== flag) break;\r\n    if (cheeks.value[tempY][tempX] === flag) num += 1;\r\n  }\r\n\r\n  return num >= 5;\r\n};\r\nconst ru_ld = (x, y, flag) => {\r\n  let num = 1;\r\n  // 向右上找\r\n  for (let i = 1; i < 5; i++) {\r\n    let tempX = x - i;\r\n    let tempY = y + i;\r\n    if (tempX < 0 || tempY > 14 || cheeks.value[tempY][tempX] !== flag) break;\r\n    if (cheeks.value[tempY][tempX] === flag) num += 1;\r\n  }\r\n  // 向左下找\r\n  for (let i = 1; i < 5; i++) {\r\n    let tempX = x + i;\r\n    let tempY = y - i;\r\n    if (tempX > 14 || tempY < 0 || cheeks.value[tempY][tempX] !== flag) break;\r\n    if (cheeks.value[tempY][tempX] === flag) num += 1;\r\n  }\r\n\r\n  return num >= 5;\r\n};\r\n\r\nonMounted(() => {\r\n  init();\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.wrap {\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n#canvas {\r\n  background: #e3cdb0;\r\n}\r\n</style>","import script from \"./goBang.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./goBang.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./goBang.vue?vue&type=style&index=0&id=57318ff2&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\s\\\\dds\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-57318ff2\"]])\n\nexport default __exports__"],"names":["rand","min","max","Math","round","random","first","ref","cheeks","setFirst","value","init","canvas","document","getElementById","ctx","getContext","i","beginPath","moveTo","lineTo","stroke","closePath","Array","fill","onclick","e","clientX","offsetX","clientY","offsetY","console","log","x","y","cheeksX","cheeksY","arc","PI","fillStyle","setTimeout","isWin","con","confirm","clearRect","flag","up_down","left_right","lu_rd","ru_ld","num","tempY","tempX","onMounted","__exports__"],"sourceRoot":""}